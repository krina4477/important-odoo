<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="cr_receptionist_tree_view" model="ir.ui.view">
        <field name="name">res.partner.tree</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <tree string="receptionist">
                <field name="name"/>
                <field name="sex"/>
                <field name="state"/>
                <!--                <field name="user_id"/>-->
            </tree>
        </field>
    </record>

    <record id="cr_receptionist_form_view" model="ir.ui.view">
        <field name="name">res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="arch" type="xml">
            <form string="receptionist">
                <header>
                    <button attrs="{'invisible':[('state','in',['approve','cancel'])]}"
                            name="create_receptionist_user" string="Approve" type="object" class="oe_highlight"
                            groups="cr_medical_base.group_admin"/>
                    <button attrs="{'invisible':[('state','in',['draft','approve'])]}"
                            name="create_user" string="Cancel" type="object" class="oe_highlight"
                            groups="cr_medical_base.group_admin"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,approve"/>
                </header>
                <sheet>
                    <field name="image_1920" widget="image" class="oe_avatar"/>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only" string="Patient Name"/>
                        <h1>
                            <field name="name" default_focus="1" placeholder="Name" required="True"/>
                        </h1>
                    </div>

                    <group>
                        <group>
                            <field name="sex"/>
                            <field name="user_id" readonly="1"/>
                        </group>
                        <group>
                            <field name="is_receptionist" invisible="1"/>
                        </group>
                    </group>
                    <group string="Personal Info" name="personal_info">
                        <group>
                            <label for="street" string="Address"/>
                            <div class="o_address_format" name="div_address">
                                <field name="street" placeholder="Street..." class="o_address_street"/>
                                <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                <field name="city" placeholder="City" class="o_address_city"/>
                                <field name="state_id" placeholder="State"/>
                                <field name="country_id" placeholder="Country"/>
                            </div>
                        </group>
                        <group>
                            <field name="email" required="True"/>
                            <field name="mobile" required="True"/>
                            <field name="confirmation_ref"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>


    <record id="action_cr_receptionist_information" model="ir.actions.act_window">
        <field name="name">Receptionist Information</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('is_receptionist','=',True)]</field>
        <field name="context">{'default_is_receptionist':True}</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                     (0, 0, {'view_mode': 'tree', 'view_id': ref('cr_receptionist_tree_view')}),
                     (0, 0, {'view_mode': 'form', 'view_id': ref('cr_receptionist_form_view')})]"/>
    </record>

    <menuitem id="cr_menu_receptionist" name="Reception" parent="cr_medical_base.cr_menu_configuration" active="True"
              sequence="6"/>

    <menuitem id="cr_menu_receptionist_information"
              name="Receptionist Information"
              action="reception.action_cr_receptionist_information"
              parent="reception.cr_menu_receptionist"
              active="True"
              sequence="1"/>

    <menuitem id="cr_medical_base.cr_menu_patient" name="Patient" parent="cr_medical_base.cr_medical_menu_root" active="True"
              sequence="2" groups="reception.group_reception"/>

</odoo>